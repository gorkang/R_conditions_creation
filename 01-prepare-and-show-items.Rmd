```{r item_preparation, include=FALSE}

# Item preparation
  source("scripts/item_preparation.R")

# Read images
# Fact-box
  # Directory
  fact_box_dir <- "materials/Presentation_format/fbpi/output/"
  # Fact-box img files
  fact_box_imgs <- dir(fact_box_dir)
  
# New paradigm
  # Directory
  new_paradigm_dir <- "materials/Presentation_format/nppi/output/"
  # Fact-box img files
  new_paradigm_imgs <- dir(new_paradigm_dir)
  
  # Function for displaying items
  source("functions/funcs_item_displaying.R")
  
```
    
# Breast Cancer Items

## Low normative PPV

### NF ABSOLUTE

```{r, results='asis', echo=FALSE, ca_nfab_low}

print_cat_items("ca_nfab_low")

```

### PR ABSOLUTE

```{r, results='asis', echo=FALSE, ca_prab_low}

print_cat_items("ca_prab_low")
```

### PR RELATIVE

```{r, results='asis', echo=FALSE, ca_prre_low}
print_cat_items("ca_prre_low")
```

### PF ABSOLUTE

```{r, results='asis', echo=FALSE, ca_pfab_low}
print_cat_items("ca_pfab_low")
```

### FB PICTORIAL

**ca_fbpi_low_gi**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("low", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE, results='asis'}
fb_ca_low <- readPNG(paste0(fact_box_dir, grep(".*ca_low.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_ca_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[1]])

cat("\n****************************\n")
```
  
**ca_fbpi_low_gs**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("low", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_ca_low <- readPNG(paste0(fact_box_dir, grep(".*ca_low.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_ca_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[2]])

cat("\n****************************\n")
```
  
**ca_fbpi_low_sg**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("low", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_ca_low <- readPNG(paste0(fact_box_dir, grep(".*ca_low.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_ca_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(cat(responses_pic$sg[[grep("cancer", responses_pic$sg)]]))

cat("\n****************************\n")
```
  
**ca_fbpi_low_ss**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("low", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_ca_low <- readPNG(paste0(fact_box_dir, grep(".*ca_low.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_ca_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[4]])
```


### NP PICTORIAL

**ca_nppi_low_gi**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]][[grep("low", names(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE, results='asis'}
np_ca_low <- readPNG(paste0(new_paradigm_dir, grep(".*ca_low.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_ca_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[1]])

cat("\n****************************\n")
```
  
**ca_nppi_low_gs**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]][[grep("low", names(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_ca_low <- readPNG(paste0(new_paradigm_dir, grep(".*ca_low.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_ca_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[2]])

cat("\n****************************\n")
```
  
**ca_nppi_low_sg**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]][[grep("low", names(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_ca_low <- readPNG(paste0(new_paradigm_dir, grep(".*ca_low.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_ca_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(cat(responses_pic$sg[[grep("cancer", responses_pic$sg)]]))

cat("\n****************************\n")
```
  
**ca_nppi_low_ss**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]][[grep("low", names(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_ca_low <- readPNG(paste0(new_paradigm_dir, grep(".*ca_low.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_ca_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[4]])
```


## High normative PPV

### NF ABSOLUTE

```{r, results='asis', echo=FALSE, ca_nfab_high}
print_cat_items("ca_nfab_high")
```

### PR ABSOLUTE

```{r, results='asis', echo=FALSE, ca_prab_high}
print_cat_items("ca_prab_high")
```

### PR RELATIVE

```{r, results='asis', echo=FALSE, ca_prre_high}
print_cat_items("ca_prre_high")
```

### PF ABSOLUTE

```{r, results='asis', echo=FALSE, ca_pfab_high}
print_cat_items("ca_pfab_high")

```

### FB PICTORIAL

**ca_fbpi_high_gi**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("high", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE, results='asis'}
fb_ca_high <- readPNG(paste0(fact_box_dir, grep(".*ca_high.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_ca_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[1]])

cat("\n****************************\n")
```
  
**ca_fbpi_high_gs**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("high", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_ca_high <- readPNG(paste0(fact_box_dir, grep(".*ca_high.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_ca_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[2]])

cat("\n****************************\n")
```
  
**ca_fbpi_high_sg**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("high", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_ca_high <- readPNG(paste0(fact_box_dir, grep(".*ca_high.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_ca_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(cat(responses_pic$sg[[grep("cancer", responses_pic$sg)]]))

cat("\n****************************\n")
```
  
**ca_fbpi_high_ss**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("high", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_ca_high <- readPNG(paste0(fact_box_dir, grep(".*ca_high.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_ca_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[4]])

cat("\n****************************\n")
```

### NP PICTORIAL

**ca_nppi_high_gi**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]][[grep("high", names(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE, results='asis'}
np_ca_high <- readPNG(paste0(new_paradigm_dir, grep(".*ca_high.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_ca_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[1]])

cat("\n****************************\n")
```
  
**ca_nppi_high_gs**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]][[grep("high", names(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_ca_high <- readPNG(paste0(new_paradigm_dir, grep(".*ca_high.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_ca_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[2]])

cat("\n****************************\n")
```
  
**ca_nppi_high_sg**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]][[grep("high", names(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_ca_high <- readPNG(paste0(new_paradigm_dir, grep(".*ca_high.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_ca_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(cat(responses_pic$sg[[grep("cancer", responses_pic$sg)]]))

cat("\n****************************\n")
```
  
**ca_nppi_high_ss**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]][[grep("high", names(nppi_context[[grep("ca", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_ca_high <- readPNG(paste0(new_paradigm_dir, grep(".*ca_high.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_ca_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["ca_question"]])
cat(responses[[4]])
```

# Trisomy 21 Items

## Low normative PPV

### NF ABSOLUTE

```{r, results='asis', echo=FALSE, pr_nfab_low}
print_cat_items("pr_nfab_low")
```

### PR ABSOLUTE

```{r, results='asis', echo=FALSE, pr_prab_low}
print_cat_items("pr_prab_low")
```

### PR RELATIVE

```{r, results='asis', echo=FALSE, pr_prre_low}
print_cat_items("pr_prre_low")
```

### PF ABSOLUTE

```{r, results='asis', echo=FALSE, pr_pfab_low}
print_cat_items("pr_pfab_low")
```

### FB PICTORIAL

**pr_fbpi_low_gi**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("low", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE, results='asis'}
fb_pr_low <- readPNG(paste0(fact_box_dir, grep(".*pr_low.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_pr_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[1]])

cat("\n****************************\n")
```
  
**pr_fbpi_low_gs**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("low", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_pr_low <- readPNG(paste0(fact_box_dir, grep(".*pr_low.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_pr_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[2]])

cat("\n****************************\n")
```
  
**pr_fbpi_low_sg**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("low", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_pr_low <- readPNG(paste0(fact_box_dir, grep(".*pr_low.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_pr_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses_pic$sg[[grep("Trisomy", responses_pic$sg)]])

cat("\n****************************\n")
```
  
**pr_fbpi_low_ss**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("low", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_pr_low <- readPNG(paste0(fact_box_dir, grep(".*pr_low.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_pr_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[4]])
```

### NP PICTORIAL

**pr_nppi_low_gi**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]][[grep("low", names(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE, results='asis'}
np_pr_low <- readPNG(paste0(new_paradigm_dir, grep(".*pr_low.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_pr_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[1]])

cat("\n****************************\n")
```
  
**pr_nppi_low_gs**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]][[grep("low", names(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_pr_low <- readPNG(paste0(new_paradigm_dir, grep(".*pr_low.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_pr_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[2]])

cat("\n****************************\n")
```
  
**pr_nppi_low_sg**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]][[grep("low", names(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_pr_low <- readPNG(paste0(new_paradigm_dir, grep(".*pr_low.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_pr_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses_pic$sg[[grep("Trisomy", responses_pic$sg)]])

cat("\n****************************\n")
```
  
**pr_nppi_low_ss**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]][[grep("low", names(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_pr_low <- readPNG(paste0(new_paradigm_dir, grep(".*pr_low.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_pr_low)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[4]])
```


## High normative PPV

### NF ABSOLUTE

```{r, results='asis', echo=FALSE, pr_nfab_high}
print_cat_items("pr_nfab_high")
```

### PR ABSOLUTE

```{r, results='asis', echo=FALSE, pr_prab_high}
print_cat_items("pr_prab_high")
```

### PR RELATIVE

```{r, results='asis', echo=FALSE, pr_prre_high}
print_cat_items("pr_prre_high")
```

### PF ABSOLUTE

```{r, results='asis', echo=FALSE, pr_pfab_high}
print_cat_items("pr_pfab_high")
```

### FB PICTORIAL

**pr_fbpi_high_gi**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("high", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE, results='asis'}
fb_pr_high <- readPNG(paste0(fact_box_dir, grep(".*pr_high.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_pr_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[1]])

cat("\n****************************\n")
```
  
**pr_fbpi_high_gs**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("high", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_pr_high <- readPNG(paste0(fact_box_dir, grep(".*pr_high.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_pr_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[2]])

cat("\n****************************\n")
```

**pr_fbpi_high_sg**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("high", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_pr_high <- readPNG(paste0(fact_box_dir, grep(".*pr_high.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_pr_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses_pic$sg[[grep("Trisomy", responses_pic$sg)]])

cat("\n****************************\n")
```
  
**pr_fbpi_high_ss**  
```{r, echo=FALSE, results='asis'}
cat(fbpi_context[[grep("high", names(fbpi_context), value = TRUE)]])
```

```{r, echo=FALSE}
fb_pr_high <- readPNG(paste0(fact_box_dir, grep(".*pr_high.*", fact_box_imgs, value = TRUE)))
grid.raster(fb_pr_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[4]])
```

### NP PICTORIAL

**pr_nppi_high_gi**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]][[grep("high", names(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE, results='asis'}
np_pr_high <- readPNG(paste0(new_paradigm_dir, grep(".*pr_high.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_pr_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[1]])

cat("\n****************************\n")
```
  
**pr_nppi_high_gs**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]][[grep("high", names(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_pr_high <- readPNG(paste0(new_paradigm_dir, grep(".*pr_high.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_pr_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[2]])

cat("\n****************************\n")
```
  
**pr_nppi_high_sg**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]][[grep("high", names(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_pr_high <- readPNG(paste0(new_paradigm_dir, grep(".*pr_high.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_pr_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses_pic$sg[[grep("Trisomy", responses_pic$sg)]])

cat("\n****************************\n")
```
  
**pr_nppi_high_ss**  
```{r, echo=FALSE, results='asis'}
cat(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]][[grep("high", names(nppi_context[[grep("pr", names(nppi_context), value = TRUE)]]), value = TRUE)]])
```

```{r, echo=FALSE}
np_pr_high <- readPNG(paste0(new_paradigm_dir, grep(".*pr_high.*", new_paradigm_imgs, value = TRUE)))
grid.raster(np_pr_high)
```

```{r, echo=FALSE, results='asis'}
cat(questions[["pr_question"]])
cat(responses[[4]])
```

# Comprehension questions

```{r comprehension, echo=FALSE, results='asis'}
source("scripts/comprehension_preparing.R")

invisible(lapply(comprehension_questions, lapply, cat))
```




# Follow-up questions

```{r follow-up, echo=FALSE, results='asis'}
source("scripts/follow_up_preparing.R")

# invisible(lapply(fu_questions, lapply, cat))
invisible(lapply(fu_questions, function(x) {cat(x); cat("\n****************************\n")}))
```


# Scales

```{r scales, echo=FALSE, results='asis'}
source("scripts/scales_preparing.R")

invisible(lapply(scales_questions, lapply, cat))
```

